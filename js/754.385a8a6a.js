"use strict";(self["webpackChunkfvl2025"]=self["webpackChunkfvl2025"]||[]).push([[754],{2373:function(t,e,r){r.r(e),r.d(e,{default:function(){return R}});var a=r(6768),l=r(4232);const n={key:0,class:"work-detail"},s={key:0,class:"work-hero-grid"},o=["src","alt"],i={key:1,class:"work-hero"},u=["src"],c={class:"work-content"},v={class:"work-main-layout"},d={class:"work-description-section"},h={class:"section-heading"},k={class:"work-description"},p={class:"artist-section"},w={class:"section-heading"},f={class:"artist-content"},g={key:0,class:"artist-photo"},y=["src"],m={key:1,class:"artist-photos"},_=["src"],E={class:"artist-info"},b={key:1,class:"work-detail loading"};function A(t,e,r,A,L,x){return A.work?((0,a.uX)(),(0,a.CE)("div",n,[A.imageUrls.length>1?((0,a.uX)(),(0,a.CE)("div",s,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(A.imageUrls,(t,e)=>((0,a.uX)(),(0,a.CE)("div",{key:e,class:"work-hero"},[(0,a.Lk)("img",{src:t,alt:`work-${e+1}`},null,8,o)]))),128))])):((0,a.uX)(),(0,a.CE)("div",i,[(0,a.Lk)("img",{src:A.coverUrl,alt:"cover"},null,8,u)])),(0,a.Lk)("div",c,[(0,a.Lk)("div",v,[(0,a.Lk)("div",d,[(0,a.Lk)("h2",h,(0,l.v_)(A.isEnglish?A.work?.work_en?.title:A.work?.work_zh?.title),1),(0,a.Lk)("div",k,(0,l.v_)(A.descriptionText),1)]),(0,a.Lk)("div",p,[(0,a.Lk)("h2",w,(0,l.v_)(A.isEnglish?A.work?.work_en.interactive_description:A.work?.work_zh.interactive_description),1),(0,a.Lk)("div",f,[A.hideArtistPhoto?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[A.artistAvatarUrls.length<=1?((0,a.uX)(),(0,a.CE)("div",g,[(0,a.Lk)("img",{src:A.artistAvatarUrls[0],alt:"artist photo"},null,8,y)])):((0,a.uX)(),(0,a.CE)("div",m,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(A.artistAvatarUrls,(t,e)=>((0,a.uX)(),(0,a.CE)("img",{key:e,src:t,alt:"artist photo"},null,8,_))),128))]))],64)),(0,a.Lk)("div",E,[(0,a.Lk)("p",null,(0,l.v_)(A.artistNoteText),1)])])])])])])):((0,a.uX)(),(0,a.CE)("div",b,(0,l.v_)(A.errorText||"Loading..."),1))}r(8111),r(2489),r(1701);var L=r(1387),x=r(144),C=r(4373),z={name:"PortfolioDetil",setup(){const t=(0,L.lq)(),e=String(t.params.id||""),r=(0,x.KR)(!1),l=(0,x.KR)(null),n=(0,x.KR)(""),s=(0,x.KR)(""),o=(0,x.KR)([]),i=(0,x.KR)(""),u=(0,x.KR)(""),c=(0,x.KR)([]),v=(0,x.KR)([]),d=(0,x.KR)(null),h=async()=>{try{const{data:t}=await C.A.get("https://unzip-clab-api.clab.org.tw/api/v1/schedules/10/artists?page=0&limit=25"),e=Array.isArray(t?.results)?t.results:[];c.value=e}catch(t){console.error("Failed to fetch artists list:",t)}},k=()=>{const e=t.query.lang;if("en"===e)return!0;if("zh"===e)return!1;try{return"en"===localStorage.getItem("lang")}catch{return!1}},p=(t,e)=>{for(const r of e){const e=t&&"string"===typeof t[r]?t[r]:"";if(e&&e.trim().length>0)return e}return""},w=t=>{if(!t||"string"!==typeof t)return"";const e=t.replace(/<br\s*\/?>(\r\n)?/gi,"\n"),r=document.createElement("div");r.innerHTML=e;const a=r.textContent||r.innerText||"";return a},f=()=>{const t=t=>t?`https://unzip-clab-api.clab.org.tw/${t}`:"",e=l.value?.photo_1||"",a=l.value?.photo_2||"",u=l.value?.photo_3||"";o.value=[e,a,u].filter(Boolean).slice(0,3).map(t),n.value=o.value[0]||"";const c=l.value?.photo_2||l.value?.photo_3||"";s.value=c?t(c):"";const v=r.value?l.value?.work_en:l.value?.work_zh,d=p(v||{},["description","proposal","note","summary","content","text"]);i.value=w(d)},g=(0,a.EW)(()=>{const t=r.value?l.value?.work_en:l.value?.work_zh,e=p(t||{},["note","artist"]);return w(e)}),y=(0,a.EW)(()=>{if("number"===typeof d.value&&d.value>=0)return d.value;const t=l.value?.index;if(void 0!==t&&null!==t){const e=Number(t);if(!Number.isNaN(e)){const t=Math.max(0,Math.floor(e)-1);return t}}if(v.value&&v.value.length>0){const t=v.value.findIndex(t=>String(t.id)===String(e));if(t>=0)return t}return 0}),m=t=>{const e=c.value&&c.value[t]?c.value[t]:null,r=e?.avatar||"";return r?`https://unzip-clab-api.clab.org.tw/${r}`:""},_=t=>Array.isArray(c.value)?c.value.findIndex(e=>e?.artist_zh?.name===t):-1,E=(0,a.EW)(()=>{const t=l.value?.work_zh?.title||"",e=l.value?.work_en?.title||"",r=`${t} ${e}`.toLowerCase();if(t.includes("奶油金剛")){const t=_("簡單映相");return t>=0?t:null}if(t.includes("昌勳與他的打字機")||t.includes("Dome穴遇言")){const t=_("可揚與他的快樂夥伴");return t>=0?t:null}if(t.includes("簡單映相"))return 4;if(t.includes("殘構重生")){const t=_("黑川良一");return t>=0?t:null}if(r.includes("thewhole")){const t=_("謝杰樺 × 安娜琪舞蹈劇場");return t>=0?t:null}return null}),b=(0,a.EW)(()=>{const t=l.value?.work_zh?.title||"";if(t.includes("王一鷗")||t.includes("阿利娜")||t.includes("阿利娜・托凡")||t.includes("水深萬象")||t.includes("水身萬象")){const t=_("王一鷗"),e=_("阿利娜・托凡"),r=[t,e].filter(t=>"number"===typeof t&&t>=0);if(2===r.length)return r}if(t.includes("赫圖比斯")||t.includes("混沌的協奏")){const t=_("Normal Studio"),e=_("嬉皮萬歲"),r=[t,e].filter(t=>"number"===typeof t&&t>=0);if(2===r.length)return r}return null}),A=(0,a.EW)(()=>{const t=l.value?.work_zh?.title||"";return"赤聲之曙"===t}),z=(0,a.EW)(()=>{const t=y.value;if(!Array.isArray(c.value)||0===c.value.length)return[];if(Array.isArray(b.value)&&2===b.value.length)return b.value.map(t=>m(t)).filter(Boolean);if(null!==E.value){const t=m(E.value);return t?[t]:[]}if(A.value){const e=m(t),r=m(t+1);return[e,r].filter(Boolean)}const e=m(t)||m(0);return e?[e]:[]}),K=(0,a.EW)(()=>{const t=l.value?.work_zh?.title||"",e=l.value?.work_en?.title||"",r=`${t} ${e}`;return r.includes("沉浸式影音工作坊－實踐大學媒傳系成果呈現")||r.toLowerCase().includes("immersive audio-visual workshop")}),X=()=>{try{const t=`work_${e}`,r=localStorage.getItem(t);if(!r)return!1;const a=JSON.parse(r);return l.value=a,"number"===typeof a?._listIndex&&(d.value=a._listIndex),f(),!0}catch(t){return console.error("Failed to parse work data from localStorage:",t),!1}},R=t=>t?Array.isArray(t?.results)?t.results[0]||null:t?.data&&"object"===typeof t.data?t.data:"object"===typeof t?t:null:null,U=async()=>{try{const{data:t}=await C.A.get(`https://unzip-clab-api.clab.org.tw/api/v1/works/${e}`),r=R(t);r?(l.value=r,f()):u.value="No data for this work."}catch(t){console.error("Failed to fetch work by id:",t),u.value="Failed to load work. Please try again later."}},I=t=>{"lang"===t.key&&(r.value="en"===t.newValue,l.value&&f())};return(0,a.sV)(async()=>{r.value=k();const t=X();t||await U();try{const{data:t}=await C.A.get("https://unzip-clab-api.clab.org.tw/api/v1/schedules/10/works?page=0&limit=25");v.value=Array.isArray(t?.results)?t.results:[]}catch(e){console.error("Failed to fetch schedule works list:",e),v.value=[]}await h(),window.addEventListener("storage",I)}),(0,a.xo)(()=>{window.removeEventListener("storage",I)}),{work:l,coverUrl:n,secondaryUrl:s,imageUrls:o,isEnglish:r,descriptionText:i,errorText:u,artistNoteText:g,artistAvatarUrls:z,hideArtistPhoto:K}}},K=r(1241);const X=(0,K.A)(z,[["render",A],["__scopeId","data-v-67dfc61c"]]);var R=X}}]);
//# sourceMappingURL=754.385a8a6a.js.map